<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<% rows.forEach(function(row) { %>
		<title><%= row.shopName %>の詳細情報</title>
		<link rel="stylesheet" href="/styles/menu.css" type="text/css" />
	</head>
	<body>
		<h1><div class="title"><%= row.shopName %>の詳細情報</div></h1>
		<div class="picture">
			<div class="item">
				<p class="menImage">
					<img src="/upload/<%= row.image %>" alt="" width="auto" height="400" />
				</p>
			</div>
		</div> 
    <button id="deleteButton" dataId="<%= row.id %>">削除</button>
		<div class="shop">
			<h1>店名：<%= row.shopName %></h1>
		</div>

		<div class="container">
			<div class="photo"></div>
			<div class="text-container">
				<div class="text">
					<h3><p><%= row.comment %></p></h3>
				</div>
				<div class="total">
					<h1>合計</h1>
					<h3><p><%= row.men + row.soup + row.topping %></p></h3>
				</div>
				<div class="point">
					<h2><p>麺</p></h2>
					<h3><p><%= row.men %></p></h3>
					<h2><p>スープ</p></h2>
					<h3><p><%= row.soup %></p></h3>
					<h2><p>トッピング</p></h2>
					<h3><p><%= row.topping %></p></h3>
				</div>
			</div>
		</div>
		<% }) %>
    <script>
      document.getElementById('deleteButton').addEventListener('click', function() {
        const idToDelete = this.getAttribute('dataId');
    
        // 追加: 確認ダイアログ表示
        if (!confirm('本当に消してもいいですか？')) {
          return; // 「Cancel」を選択した場合、以降の処理はキャンセルされます
        }
    
        fetch(`/menu/${idToDelete}`, {
          method: 'DELETE'
        })
          .then(response => {
            if (response.status === 200) {
              alert('データが削除されました。');
              // 必要に応じてリダイレクトなどのアクションを追加
            } else {
              alert('データの削除に失敗しました。');
            }
          })
          .catch(error => {
            console.error('エラー: ' + error);
          });
      });
    </script>
	</body>
</html>
